<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>rxode2 ODE solving syntax • rxode2</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="rxode2 ODE solving syntax">
<meta name="google-site-verification" content="fp9A3qPrCar1DKeVQg4Mfrf6-An5keP9OwhIxUkntbU">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rxode2</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.0.4.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true"><span class="fa fas fa-book"></span> Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Getting started</h6></li>
    <li><a class="dropdown-item" href="../articles/rxode2-syntax.html">rxode2 mini language syntax</a></li>
    <li><a class="dropdown-item" href="../articles/Modifying-Models.html">rxode2 model modification %&gt;%</a></li>
    <li><a class="dropdown-item" href="../articles/rxode2-pipeline.html">rxode2 pipeline ie %&gt;%</a></li>
    <li><a class="dropdown-item" href="../articles/rxode2-speed.html">Speeding up rxode2 ODE solving</a></li>
    <li><a class="dropdown-item" href="../articles/rxode2-data-frame.html">Adaptive Data Frames with rxode2</a></li>
    <li><a class="dropdown-item" href="../articles/rxode2-plot.html">Plotting with rxode2</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Advanced Features, Model Types, Technical Details</h6></li>
    <li><a class="dropdown-item" href="../articles/rxode2-model-types.html">rxode2 model types</a></li>
    <li><a class="dropdown-item" href="../articles/rxode2-cmt.html">Chainging rxode2 compartment numbers</a></li>
    <li><a class="dropdown-item" href="../articles/rxode2-transit-compartments.html">rxode2 transit compartment models</a></li>
    <li><a class="dropdown-item" href="../articles/rxode2-shiny.html">Using Shiny with rxode2</a></li>
    <li><a class="dropdown-item" href="../articles/rxode2-covariates.html">rxode2 covariates</a></li>
    <li><a class="dropdown-item" href="../articles/rxode2-stiff.html">Stiff Systems and Jacobian specification</a></li>
    <li><a class="dropdown-item" href="../articles/rxode2-rxUse.html">Adding compiled rxode2 models to your package</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-dosing-events" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true"><span class="fa fas fa-stethoscope"></span> Dosing/Events</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-dosing-events">
<li><a class="dropdown-item" href="../articles/rxode2-datasets.html">nlmixr/rxode2 dataset overview</a></li>
    <li><a class="dropdown-item" href="../articles/rxode2-event-types.html">Supported Event Types</a></li>
    <li><a class="dropdown-item" href="../articles/rxode2-event-table.html">Easy rxode2 Event Tables</a></li>
    <li><a class="dropdown-item" href="../articles/rxode2-events-classic.html">Classic rxode2 events explained</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-simulations" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true"><span class="fa fas fa-desktop"></span> Simulations</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-simulations">
<li><a class="dropdown-item" href="../articles/rxode2-single-subject.html">Single Subject ODE solving</a></li>
    <li><a class="dropdown-item" href="../articles/rxode2-sim-var.html">Multiple Subject rxode2 Simulation</a></li>
    <li><a class="dropdown-item" href="../articles/rxode2-prior-data.html">Using Prior Data for ODE solving</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-help" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true"><span class="fa fas fa-life-ring"></span> Help</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-help">
<li><a class="dropdown-item" href="../articles/rxode2-tutorials.html">Running the interactive tutorials</a></li>
    <li><a class="external-link dropdown-item" href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4728294/pdf/PSP4-5-03.pdf">2015 CPT tutorial</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/rxode2-covariates.html">Adding Circadian Rythmn (time-varying covariates)</a></li>
    <li><a class="dropdown-item" href="../articles/rxode2-wt.html">Weight Based Dosing</a></li>
    <li><a class="dropdown-item" href="../articles/rxode2-nesting.html">Simulating Multiple levels of nesting (iov, between study etc)</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changes/News</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="https://nlmixr2.github.io/rxode2/reference/index.html"><span class="fa fa-file-code-o"></span> Functions</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true"><span class="fa fas fa-archive"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-">
<li><a class="dropdown-item" href="https://nlmixr2.github.io/rxode2-manual/">rxode2 User Guide</a></li>
    <li><a class="external-link dropdown-item" href="https://nlmixr2.org/">nlmixr2</a></li>
  </ul>
</li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/nlmixr2/rxode2"><span class="fa fa-github"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/nlmixr2/rxode2/releases"><span class="fa fa-download"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<link href="rxode2-syntax_files/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="rxode2-syntax_files/htmlwidgets-1.6.4/htmlwidgets.js"></script><link href="rxode2-syntax_files/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="rxode2-syntax_files/datatables-binding-0.33/datatables.js"></script><link href="rxode2-syntax_files/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="rxode2-syntax_files/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="rxode2-syntax_files/dt-core-1.13.6/js/jquery.dataTables.min.js"></script><link href="rxode2-syntax_files/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet">
<script src="rxode2-syntax_files/nouislider-7.0.10/jquery.nouislider.min.js"></script><link href="rxode2-syntax_files/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet">
<script src="rxode2-syntax_files/selectize-0.12.0/selectize.min.js"></script><link href="rxode2-syntax_files/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="rxode2-syntax_files/crosstalk-1.2.1/js/crosstalk.min.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>rxode2 ODE solving syntax</h1>
            
            <h4 data-toc-skip class="date">2025-06-16</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/nlmixr2/rxode2/blob/main/vignettes/rxode2-syntax.Rmd" class="external-link"><code>vignettes/rxode2-syntax.Rmd</code></a></small>
      <div class="d-none name"><code>rxode2-syntax.Rmd</code></div>
    </div>

    
    
<pre><code><span><span class="co">## rxode2 3.0.4.9000 using 2 threads (see ?getRxThreads)</span></span>
<span><span class="co">##   no cache: create with `rxCreateCache()`</span></span></code></pre>
<div class="section level3">
<h3 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h3>
<p>This briefly describes the syntax used to define models that
<code>rxode2</code> will translate into R-callable compiled code. It
also describes the communication of variables between <code>R</code> and
the <code>rxode2</code> modeling specification.</p>
</div>
<div class="section level3">
<h3 id="creating-rxode2-models">Creating rxode2 models<a class="anchor" aria-label="anchor" href="#creating-rxode2-models"></a>
</h3>
<p>The ODE-based model specification may be coded inside four
places:</p>
<ul>
<li>Inside a <code>rxode2({})</code> block statements:</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://nlmixr2.github.io/rxode2/">rxode2</a></span><span class="op">)</span></span>
<span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rxode2.html">rxode2</a></span><span class="op">(</span><span class="op">{</span></span>
<span>  <span class="co"># simple assignment</span></span>
<span>  <span class="va">C2</span> <span class="op">&lt;-</span> <span class="va">centr</span><span class="op">/</span><span class="va">V2</span></span>
<span></span>
<span>  <span class="co"># time-derivative assignment</span></span>
<span>  <span class="va">d</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/stats/TDist.html" class="external-link">dt</a></span><span class="op">(</span><span class="va">centr</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="cn">F</span><span class="op">*</span><span class="va">KA</span><span class="op">*</span><span class="va">depot</span> <span class="op">-</span> <span class="va">CL</span><span class="op">*</span><span class="va">C2</span> <span class="op">-</span> <span class="va">Q</span><span class="op">*</span><span class="va">C2</span> <span class="op">+</span> <span class="va">Q</span><span class="op">*</span><span class="va">C3</span>;</span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
<ul>
<li>Inside a <code>rxode2("")</code> string statement:</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rxode2.html">rxode2</a></span><span class="op">(</span><span class="st">"</span></span>
<span><span class="st">  # simple assignment</span></span>
<span><span class="st">  C2 &lt;- centr/V2</span></span>
<span><span class="st"></span></span>
<span><span class="st">  # time-derivative assignment</span></span>
<span><span class="st">  d/dt(centr) &lt;- F*KA*depot - CL*C2 - Q*C2 + Q*C3;</span></span>
<span><span class="st">"</span><span class="op">)</span></span></code></pre></div>
<ul>
<li>In a file name to be loaded by rxode2:</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span><span class="op">(</span><span class="st">"</span></span>
<span><span class="st">  # simple assignment</span></span>
<span><span class="st">  C2 &lt;- centr/V2</span></span>
<span><span class="st"></span></span>
<span><span class="st">  # time-derivative assignment</span></span>
<span><span class="st">  d/dt(centr) &lt;- F*KA*depot - CL*C2 - Q*C2 + Q*C3;</span></span>
<span><span class="st">"</span>, <span class="st">"modelFile.rxode2"</span><span class="op">)</span></span>
<span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rxode2.html">rxode2</a></span><span class="op">(</span>filename<span class="op">=</span><span class="st">'modelFile.rxode2'</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="st">"modelFile.rxode2"</span><span class="op">)</span></span></code></pre></div>
<ul>
<li>In a model function which can be parsed by <code>rxode2</code>:</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/model.html">model</a></span><span class="op">(</span><span class="op">{</span></span>
<span>    <span class="co"># simple assignment</span></span>
<span>    <span class="va">C2</span> <span class="op">&lt;-</span> <span class="va">centr</span><span class="op">/</span><span class="va">V2</span></span>
<span></span>
<span>    <span class="co"># time-derivative assignment</span></span>
<span>    <span class="va">d</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/stats/TDist.html" class="external-link">dt</a></span><span class="op">(</span><span class="va">centr</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="cn">F</span><span class="op">*</span><span class="va">KA</span><span class="op">*</span><span class="va">depot</span> <span class="op">-</span> <span class="va">CL</span><span class="op">*</span><span class="va">C2</span> <span class="op">-</span> <span class="va">Q</span><span class="op">*</span><span class="va">C2</span> <span class="op">+</span> <span class="va">Q</span><span class="op">*</span><span class="va">C3</span>;</span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rxode2.html">rxode2</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span> <span class="co"># or simply mod() if the model is at the end of the function</span></span>
<span></span>
<span><span class="co"># These model functions often have residual components and initial</span></span>
<span><span class="co"># (`ini({})`) conditions attached as well. For example the</span></span>
<span><span class="co"># theophylline model can be written as:</span></span>
<span></span>
<span><span class="va">one.compartment</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/ini.html">ini</a></span><span class="op">(</span><span class="op">{</span></span>
<span>    <span class="va">tka</span> <span class="op">&lt;-</span> <span class="fl">0.45</span> <span class="co"># Log Ka</span></span>
<span>    <span class="va">tcl</span> <span class="op">&lt;-</span> <span class="fl">1</span> <span class="co"># Log Cl</span></span>
<span>    <span class="va">tv</span> <span class="op">&lt;-</span> <span class="fl">3.45</span>    <span class="co"># Log V</span></span>
<span>    <span class="va">eta.ka</span> <span class="op">~</span> <span class="fl">0.6</span></span>
<span>    <span class="va">eta.cl</span> <span class="op">~</span> <span class="fl">0.3</span></span>
<span>    <span class="va">eta.v</span> <span class="op">~</span> <span class="fl">0.1</span></span>
<span>    <span class="va">add.sd</span> <span class="op">&lt;-</span> <span class="fl">0.7</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="../reference/model.html">model</a></span><span class="op">(</span><span class="op">{</span></span>
<span>    <span class="va">ka</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">tka</span> <span class="op">+</span> <span class="va">eta.ka</span><span class="op">)</span></span>
<span>    <span class="va">cl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">tcl</span> <span class="op">+</span> <span class="va">eta.cl</span><span class="op">)</span></span>
<span>    <span class="va">v</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">tv</span> <span class="op">+</span> <span class="va">eta.v</span><span class="op">)</span></span>
<span>    <span class="va">d</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/stats/TDist.html" class="external-link">dt</a></span><span class="op">(</span><span class="va">depot</span><span class="op">)</span> <span class="op">=</span> <span class="op">-</span><span class="va">ka</span> <span class="op">*</span> <span class="va">depot</span></span>
<span>    <span class="va">d</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/stats/TDist.html" class="external-link">dt</a></span><span class="op">(</span><span class="va">center</span><span class="op">)</span> <span class="op">=</span> <span class="va">ka</span> <span class="op">*</span> <span class="va">depot</span> <span class="op">-</span> <span class="va">cl</span> <span class="op">/</span> <span class="va">v</span> <span class="op">*</span> <span class="va">center</span></span>
<span>    <span class="va">cp</span> <span class="op">=</span> <span class="va">center</span> <span class="op">/</span> <span class="va">v</span></span>
<span>    <span class="va">cp</span> <span class="op">~</span> <span class="fu">add</span><span class="op">(</span><span class="va">add.sd</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># after parsing the model</span></span>
<span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu">one.compartment</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>For the block statement, character string or text file an internal
<code>rxode2</code> compilation manager translates the ODE system into
C, compiles it and loads it into the R session. The call to
<code>rxode2</code> produces an object of class <code>rxode2</code>
which consists of a list-like structure (environment) with various
member functions.</p>
<p>For the last type of model (a model function), a call to
<code>rxode2</code> creates a parsed <code>rxode2</code> ui that can be
translated to the <code>rxode2</code> compilation model.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mod</span><span class="op">$</span><span class="va">simulationModel</span></span>
<span></span>
<span><span class="co"># or</span></span>
<span><span class="va">mod</span><span class="op">$</span><span class="va">simulationIniModel</span></span></code></pre></div>
<p>This is the same type of function required for <code>nlmixr2</code>
estimation and can be extended and modified by model piping. For this
reason will be focused on in the documentation.</p>
</div>
<div class="section level3">
<h3 id="syntax">Syntax<a class="anchor" aria-label="anchor" href="#syntax"></a>
</h3>
<p>This basic model specification consists of one or more statements
optionally terminated by semi-colons <code>;</code> and optional
comments (comments are delimited by <code>#</code> and an
end-of-line).</p>
<p>A block of statements is a set of statements delimited by curly
braces, <code>{ ... }</code>.</p>
<p>Statements can be either assignments, conditional
<code>if</code>/<code>else if</code>/<code>else</code>,
<code>while</code> loops (can be exited by <code><a href="https://rdrr.io/r/base/Control.html" class="external-link">break</a></code>), special
statements, or printing statements (for debugging/testing).</p>
<p>Assignment statements can be:</p>
<ul>
<li><p><strong>simple</strong> assignments, where the left hand is an
identifier (i.e., variable). This includes string assignments</p></li>
<li><p>special <strong>time-derivative</strong> assignments, where the
left hand specifies the change of the amount in the corresponding state
variable (compartment) with respect to time e.g.,
<code>d/dt(depot)</code>:</p></li>
<li><p>special <strong>initial-condition</strong> assignments where the
left hand specifies the compartment of the initial condition being
specified, e.g. <code>depot(0) = 0</code></p></li>
<li><p>special model event changes including
<strong>bioavailability</strong> (<code>f(depot)=1</code>), <strong>lag
time</strong> (<code>alag(depot)=0</code>), <strong>modeled
rate</strong> (<code>rate(depot)=2</code>) and <strong>modeled
duration</strong> (<code>dur(depot)=2</code>). An example of these model
features and the event specification for the modeled infusions the
rxode2 data specification is found in <a href="https://nlmixr2.github.io/rxode2/articles/rxode2-event-types.html">rxode2
events vignette</a>.</p></li>
<li><p>special <strong>change point syntax, or model times</strong>.
These model times are specified by <code>mtime(var)=time</code></p></li>
<li><p>special <strong>Jacobian-derivative</strong> assignments, where
the left hand specifies the change in the compartment ode with respect
to a variable. For example, if <code>d/dt(y) = dy</code>, then a
Jacobian for this compartment can be specified as
<code>df(y)/dy(dy) = 1</code>. There may be some advantage to obtaining
the solution or specifying the Jacobian for very stiff ODE systems.
However, for the few stiff systems we tried with LSODA, this actually
slightly slowed down the solving.</p></li>
<li><p>Special <strong>string value declarations</strong> which tell
what values a string variable will take within a <code>rxode2</code>
solving structure. These values will then cause a factor to be created
for this variable on solving the <code>rxode2</code> model. As such,
they are declared in much the same way as <code>R</code>, that is:
<code>labels(a) &lt;- c("a1", "a2")</code>.</p></li>
</ul>
<p>Note that assignment can be done by <code>=</code>,
<code>&lt;-</code> or <code>~</code>.</p>
<p>When assigning with the <code>~</code> operator, the <strong>simple
assignments</strong> and <strong>time-derivative</strong> assignments
will not be output. Note that with the <code>rxode2</code> model
functions assignment with <code>~</code> can also be overloaded with a
residual distribution specification.</p>
<p>Special statements can be:</p>
<ul>
<li><p><strong>Compartment declaration statements</strong>, which can
change the default dosing compartment and the assumed compartment
number(s) as well as add extra compartment names at the end (useful for
multiple-endpoint nlmixr models); These are specified by
<code>cmt(compartmentName)</code></p></li>
<li><p><strong>Parameter declaration statements</strong>, which can make
sure the input parameters are in a certain order instead of ordering the
parameters by the order they are parsed. This is useful for keeping the
parameter order the same when using 2 different ODE models. These are
specified by <code>param(par1, par2,...)</code></p></li>
<li><p><strong>Variable interpolation statements</strong>, which tells
the interpolation for specific covariates. These include
<code>locf(cov1,     cov2, ...)</code> for last observation carried
forward, <code>nocb(cov1,     cov2, ...)</code> for next observation
carried backward, <code>linear(cov1,     cov2, ...)</code> for linear
interpolation and <code>midpoint(cov1, cov2,     ...)</code> for
midpoint interpolation.</p></li>
</ul>
<p>An example model is shown below:</p>
<pre><code><span>   <span class="co"># simple assignment</span></span>
<span>   <span class="va">C2</span> <span class="op">&lt;-</span> <span class="va">centr</span><span class="op">/</span><span class="va">V2</span></span>
<span></span>
<span>   <span class="co"># time-derivative assignment</span></span>
<span>   <span class="va">d</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/stats/TDist.html" class="external-link">dt</a></span><span class="op">(</span><span class="va">centr</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="cn">F</span><span class="op">*</span><span class="va">KA</span><span class="op">*</span><span class="va">depot</span> <span class="op">-</span> <span class="va">CL</span><span class="op">*</span><span class="va">C2</span> <span class="op">-</span> <span class="va">Q</span><span class="op">*</span><span class="va">C2</span> <span class="op">+</span> <span class="va">Q</span><span class="op">*</span><span class="va">C3</span>;</span></code></pre>
<p>Expressions in assignment and <code>if</code> statements can be
numeric or logical.</p>
<p>Numeric expressions can include the following numeric operators
<code>+, -, *, /, ^</code> and those mathematical functions defined in
the C or the R math libraries (e.g., <code>fabs</code>,
<code>exp</code>, <code>log</code>, <code>sin</code>,
<code>abs</code>).</p>
<p>You may also access the R’s functions in the <a href="https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Numerical-analysis-subroutines" class="external-link">R
math libraries</a>, like <code>lgammafn</code> for the log gamma
function.</p>
<p>The <code>rxode2</code> syntax is case-sensitive, i.e.,
<code>ABC</code> is different than <code>abc</code>, <code>Abc</code>,
<code>ABc</code>, etc.</p>
<div class="section level4">
<h4 id="identifiers">Identifiers<a class="anchor" aria-label="anchor" href="#identifiers"></a>
</h4>
<p>Like R, Identifiers (variable names) may consist of one or more
alphanumeric, underscore <code>_</code> or period <code>.</code>
characters, but the first character cannot be a digit or underscore
<code>_</code>.</p>
<p>Identifiers in a model specification can refer to:</p>
<ul>
<li>State variables in the dynamic system (e.g., compartments in a
pharmacokinetics model).</li>
<li>Implied input variable, <code>t</code> (time), <code>tlast</code>
(last time point), and <code>podo</code> (oral dose, in the undocumented
case of absorption transit models).</li>
<li>Special constants like <code>pi</code> or <a href="https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Mathematical-constants" class="external-link">R’s
predefined constants</a>.</li>
<li>Model parameters (e.g., <code>ka</code> rate of absorption,
<code>CL</code> clearance, etc.)</li>
<li>Others, as created by assignments as part of the model
specification; these are referred as <em>LHS</em> (left-hand side)
variable.</li>
</ul>
<p>Currently, the <code>rxode2</code> modeling language only recognizes
system state variables and “parameters”, thus, any values that need to
be passed from R to the ODE model (e.g., <code>age</code>) should be
either passed in the <code>params</code> argument of the integrator
function <code><a href="../reference/rxSolve.html">rxSolve()</a></code> or be in the supplied event
data-set.</p>
<p>There are certain variable names that are in the <code>rxode2</code>
event tables. To avoid confusion, the following event table-related
items cannot be assigned, or used as a state but can be accessed in the
rxode2 code:</p>
<ul>
<li><code>cmt</code></li>
<li><code>dvid</code></li>
<li><code>addl</code></li>
<li><code>ss</code></li>
<li><code>amt</code></li>
<li><code>dur</code></li>
<li><code>rate</code></li>
<li><code>Rprintf</code></li>
<li><code>print</code></li>
<li><code>printf</code></li>
<li><code>id</code></li>
</ul>
<p>However the following variables are cannot be used in a model
specification:</p>
<ul>
<li><code>evid</code></li>
<li><code>ii</code></li>
</ul>
<p>Sometimes rxode2 generates variables that are fed back to rxode2.
Similarly, nlmixr2 generates some variables that are used in nlmixr
estimation and simulation. These variables start with the either the
<code>rx</code> or <code>nlmixr</code> prefixes. To avoid any problems,
it is suggested to not use these variables starting with either the
<code>rx</code> or <code>nlmixr</code> prefixes.</p>
</div>
</div>
<div class="section level3">
<h3 id="logical-operators">Logical Operators<a class="anchor" aria-label="anchor" href="#logical-operators"></a>
</h3>
<p>Logical operators support the standard R operators <code>==</code>,
<code>!=</code> <code>&gt;=</code> <code>&lt;=</code> <code>&gt;</code>
and <code>&lt;</code>. Like R these can be in <code>if()</code> or
<code>while()</code> statements, <code><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse()</a></code> expressions.
Additionally they can be in a standard assignment. For instance, the
following is valid:</p>
<pre><code><span><span class="va">cov1</span> <span class="op">=</span> <span class="va">covm</span><span class="op">*</span><span class="op">(</span><span class="va">sexf</span> <span class="op">==</span> <span class="st">"female"</span><span class="op">)</span> <span class="op">+</span> <span class="va">covm</span><span class="op">*</span><span class="op">(</span><span class="va">sexf</span> <span class="op">!=</span> <span class="st">"female"</span><span class="op">)</span></span></code></pre>
<p>Notice that you can also use character expressions in comparisons.
This convenience comes at a cost since character comparisons are slower
than numeric expressions. Unlike R, <code>as.numeric</code> or
<code>as.integer</code> for these logical statements is not only not
needed, but will cause an syntax error if you try to use the
function.</p>
</div>
<div class="section level3">
<h3 id="supported-functions">Supported functions<a class="anchor" aria-label="anchor" href="#supported-functions"></a>
</h3>
<p>All the supported functions in rxode2 can be seen with the
<code><a href="../reference/rxSupportedFuns.html">rxSupportedFuns()</a></code>.</p>
<p>A brief description of the built-in functions are in the following
table:</p>
<div class="datatables html-widget html-fill-item" id="htmlwidget-ac96cb3ee4656e2e9ec3" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-ac96cb3ee4656e2e9ec3">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["gamma(x)","lgamma(x)","digamma(x)","trigamma(x)","tetragamma(x)","pentagamma(x)","psigamma(x, deriv)","cospi(x)","sinpi(x)","tanpi(x)","beta(a, b)","lbeta(a, b)","bessel_i(x, nu, expo)","bessel_j(x, nu)","bessel_k(x, ku, expo)","bessel_y(x, nu)","R_pow(x, y)","R_pow_di(x, I)","log1pmx","log1pexp","expm1(x)","lgamma1p(x)","sign(x)","fsign(x, y)","fprec(x, digits)","fround(x, digits)","ftrunc(x)","abs(x)","sin(x)","cos(x)","tan(x)","factorial(x)","lfactorial(x)","log10(x)","log2(x)","pnorm(x)","qnorm(x)","probit(x, low=0, hi=1)","probitInv(q, low=0, hi=1)","acos(x)","asin(x)","atan(x)","atan2(a, b)","sinh(x)","cosh(x)","tanh(x)","floor(x)","ceil(x)","logit(x, low=0, hi=1)","expit(x, low=0, hi=1)","gammaq(a, z)","gammaqInv(a, q)","ifelse(cond, trueValue, falseValue)","gammap(a, z)","gammapInv(a, p)","gammapInva(x, p)","rxnorm(x)","rxnormV(x)","rxcauchy","rxchisq","rxexp","rxf","rxgamma","rxbeta","rxgeom","rxpois","rxt","tad() or tad(x)","tad0() or tad0(x)","tafd() or tafd(x)","tafd0() or tafd0(x)","dosenum()","tlast() or tlast(cmt)","tlast0() or tlast0(cmt)","tfirst() or tfirst(cmt)","tfirst0() or tfirst0(cmt)","prod(...)","sum(...)","max(...)","min(...)","lag(parameter, number=1)","lead(parameter, number=2)","diff(par, number=1)","first(par)","last(par)","transit()","is.na()","is.nan()","is.infinite()","rinorm(x)","rinormV(x)","ricauchy","richisq","riexp","rif","rigamma","ribeta","rigeom","ropois","rit","simeps","simeta"],["The Gamma function","Natural logarithm of absolute value of gamma function","First derivative of lgamma","Second derivative of lgamma","Third derivative of lgamma","Fourth derivative of lgamma","n-th derivative of Psi, the digamma function, which is the derivative of lgammafn. In other words, digamma(x) is the same as psigamma(x,0), trigamma(x) == psigamma(x,1), etc. ","cos(pi*x)","sin(pi*x)","tan(pi*x)","Beta function","log Beta function","Bessel function type I with index nu","Bessel function type J with index nu","Bessel function type K with index nu","Bessel function type Y with index nu","x^y","x^y","log(1+x) - x ","log(1+exp(x))","exp(x)-1","log(gamma(x+1))","Compute the signum function where sign(x) is 1, 0 -1","abs(x)*sign(y)","x rounded to digits (after the decimal point, used by signif()","Round, used by R's round()","Truncated towards zero","absolute value of x","sine of x","cos of x","tan of x","factorial of x","log(factorial(x))","log base 10","log base 2","Normal CDF of x","Normal pdf of x","Probit (normal pdf) of x transforming into a range","Inverse probit of x transforming into a range","Inverse cosine","Inverse sine","Inverse tangent","Four quadrant inverse tangent","Hyperbolic sine","Hyperbolic cosine","Hyperbolic tangent","Downward rounding","Upward rounding","Logit transformation of x transforming into a range","expit transofmration in range","Normalized incomplete gamma from boost","Normalized incomplete gamma inverse from boost","if else function","Normalized lower incomplete gamma from boost","Inverse of Normalized lower incomplete gamma from boost","Inverse of Normalized lower incomplete gamma from boost","Generate one deviate of from a normal distribution for each observation scale","Generate one deviate from low discrepancy normal for each observation","Generate one deviate from the cauchy distribution for each observation","Generate one deviate from the chisq distribution for each observation","Generate one deviate from the exponential distribution for each observation","Generate one deviate from low discrepancy normal for each observation","Generate one deviate from the gamma distribution for each observation","Generate one deviate from the beta distribution for each observation","Generate one deviate from the geometric distribution for each observation","Generate one deviate from the poission distribution for each observation","Generate one deviate from the t distribtuion for each observation","Time after dose (tad()) or time after dose for a compartment tad(cmt); no dose=NA","Time after dose (tad0()) or time after dose for a compartment tad0(cmt); no dose=0","Time after first dose (tafd()) or time after first dose for a compartment tafd(cmt); no dose=NA","Time after first dose (tafd()) or time after first dose for a compartment tafd(cmt); no dose=NA","Dose Number","Time of Last dose;  This takes into consideration any lag time, so if there is a dose at time 3 and a lag of 1, the time of last dose would be 4.  tlast(cmt) calculates the time since last dose of a compartment; no dose=NA","Time of Last dose;  This takes into consideration any lag time, so if there is a dose at time 3 and a lag of 1, the time of last dose would be 4.  tlast(cmt) calculates the time since last dose of a compartment; no dose=0","Time since first dose or time since first dose of a compartment; no dose=NA","Time since first dose or time since first dose of a compartment; no dose=0","product of terms;  This uses PreciseSums so the product will not have as much floating point errors (though it will take longer)","sum of terms;  This uses PreciseSums so the product will not have as much floating point errors (though it will take longer)","maximum of a group of numbers","Min of a group of numbers","Get the lag of an input parameter; You can specify a number of lagged observations","Get the lead of an input parameter; You can specify a number of lead observation","Get the difference between the current parameter and the last parameter; Can change the parameter number","Get the first value of an input parameter","Get the last value of an input parameter","The transit compartment psuedo function","Determine if a value is NA","Determine if a value is NaN","Check to see if the value is infinite","Generate one deviate of from a normal distribution for each individual","Generate one deviate from low discrepancy normal for each individual","Generate one deviate from the cauchy distribution for each individual","Generate one deviate from the chisq distribution for each individual","Generate one deviate from the exponential distribution for each individual","Generate one deviate from low discrepancy normal for each individual","Generate one deviate from the gamma distribution for each individual","Generate one deviate from the beta distribution for each individual","Generate one deviate from the geometric distribution for each individual","Generate one deviate from the poission distribution for each individual","Generate one deviate from the t distribtuion for each individual","Simulate EPS from possibly truncated sigma matrix.  Will take sigma matrix from the current study. Simulated at the very last moment.","Simulate ETA from possibly truncated omega matrix.  Will take the omega matrix from the current study. Simulated at the initilization of the ODE system or the intialization of lhs"],["gammafn","digamma","","","","","","","","","",""," expo==1 is unscaled expo==2 is scaled by exp(-x)",""," expo==1 is unscaled expo==2 is scaled by exp(x)","",""," y is an integer","","","","","","","","","","fabs","","","","","","","","normcdf, phi","norminv","","","","","","","","","","","","","invLogit, logitInv","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Function<\/th>\n      <th>Description<\/th>\n      <th>Aliases<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"name":"Function","targets":0},{"name":"Description","targets":1},{"name":"Aliases","targets":2}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script><p>Note that <code>lag(cmt) =</code> is equivalent to
<code>alag(cmt) =</code> and not the same as <code>= lag(wt)</code></p>
</div>
<div class="section level3">
<h3 id="reserved-keywords">Reserved keywords<a class="anchor" aria-label="anchor" href="#reserved-keywords"></a>
</h3>
<p>There are a few reserved keywords in a rxode2 model. They are in the
following table:</p>
<div class="datatables html-widget html-fill-item" id="htmlwidget-e5c8c404fe174e4c81bd" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-e5c8c404fe174e4c81bd">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["time","podo","tlast","M_E","M_LOG2E","M_LOG10E","M_LN2","M_LN10","M_PI","M_PI_2","M_PI_4","M_1_PI","M_2_PI","M_2_SQRTPI","M_SQRT2","M_SQRT1_2","M_SQRT_3","M_SQRT_32","M_LOG10_2","M_2PI","M_SQRT_PI","M_1_SQRT_2PI","M_LN_SQRT_PI","M_LN_SQRT_2PI","M_LN_SQRT_PId2","pi",null,"NaN","Inf","newind","rxFlag"],["solver time","In Transit compartment models, last dose amount","Time of Last dose","Exp(1)","log2(e)","log10(e)","log(2)","log(10)","pi","pi/2","pi/4","1/pi","2/pi","2/sqrt(pi)","sqrt(2)","1/sqrt(2)","sqrt(3)","sqrt(32)","Log10(2)","2*pi","sqrt(pi)","1/(sqrt(2*pi))","log(sqrt(pi))","log(sqrt(2*pi))","log(sqrt(pi/2))","pi","R's NA value","Not a Number Value","Infinite Value","1: First record of individual; 2: Subsequent record of individual","Flag for what part of the rxode2 model is being run; 1: ddt; 2: jac; 3: ini; 4: F; 5: lag; 6: rate; 7: dur; 8: mtime; 9: matrix exponential; 10: inductive linearization; 11: lhs"],["t","","","","","","","","","","","","","","","","","","","","","","","","","","","","","NEWIND",""]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Reserved Name<\/th>\n      <th>Meaning<\/th>\n      <th>Alias<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"name":"Reserved Name","targets":0},{"name":"Meaning","targets":1},{"name":"Alias","targets":2}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script><p>Note that <code>rxFlag</code> will always output <code>11</code> or
<code>calc_lhs</code> since that is where the final variables are
calculated, though you can tweak or test certain parts of
<code>rxode2</code> by using this flag.</p>
</div>
<div class="section level3">
<h3 id="residual-functions-when-using-rxode2-functions">Residual functions when using rxode2 functions<a class="anchor" aria-label="anchor" href="#residual-functions-when-using-rxode2-functions"></a>
</h3>
<p>In addition to <code>~</code> hiding output for certain types of
output, it also is used to specify a residual output or endpoint when
the input is an <code>rxode2</code> model function (that includes the
residual in the <code>model({})</code> block).</p>
<p>These specifications are of the form:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">var</span> <span class="op">~</span> <span class="fu">add</span><span class="op">(</span><span class="va">add.sd</span><span class="op">)</span></span></code></pre></div>
<p>Indicating the variable <code>var</code> is the variable that
represents the individual central tendencies of the model and it also
represents the compartment specification in the data-set.</p>
<p>You can also change the compartment name using the <code>|</code>
syntax, that is:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">var</span> <span class="op">~</span> <span class="fu">add</span><span class="op">(</span><span class="va">add.sd</span><span class="op">)</span> <span class="op">|</span> <span class="va">cmt</span></span></code></pre></div>
<p>In the above case <code>var</code> represents the central tendency
and <code>cmt</code> represents the compartment or <code>dvid</code>
specification.</p>
<div class="section level4">
<h4 id="transformations">Transformations<a class="anchor" aria-label="anchor" href="#transformations"></a>
</h4>
<p>For normal and related distributions, you can apply the
transformation on both sides by using some keywords/functions to apply
these transformations.</p>
<div class="datatables html-widget html-fill-item" id="htmlwidget-36aa3d2a04d42bbc2145" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-36aa3d2a04d42bbc2145">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["Box-Cox","Yeo-Johnson","logit-normal","probit-normal","log-normal"],["+boxCox(lambda)","+yeoJohnson(lambda)","+logitNorm(logit.sd, low, hi)","+probitNorm(probid.sd, low, hi)","+lnorm(lnorm.sd)"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Transformation<\/th>\n      <th>rxode2/nlmixr2 code<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"name":"Transformation","targets":0},{"name":"rxode2/nlmixr2 code","targets":1}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script><p>By default for the likelihood for all of these transformations is
calculated on the <strong>untransformed</strong> scale.</p>
<p>For bounded variables like logit-normal or probit-normal the low and
high values are defaulted to 0 and 1 if missing.</p>
<p>For models where you wish to have a proportional model on one of
these transformation you can replace the standard deviation with
<code>NA</code></p>
<p>To allow for more transformations, <code>lnorm()</code>,
<code>probitNorm()</code> and <code>logitNorm()</code> can be combined
the variance stabilizing <code><a href="../reference/boxCox.html">yeoJohnson()</a></code> transformation.</p>
</div>
<div class="section level4">
<h4 id="normal-and-t-related-distributions">Normal and t-related distributions<a class="anchor" aria-label="anchor" href="#normal-and-t-related-distributions"></a>
</h4>
<p>For the normal and t-related distributions, we wanted to keep the
ability to use skewed distributions additive and proportional in the
t/cauchy-space, so these distributions are specified differently in
comparison to the other supported distributions within
<code>nlmixr2</code>:</p>
<div class="datatables html-widget html-fill-item" id="htmlwidget-febe03efa1a2d8d52a86" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-febe03efa1a2d8d52a86">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["Normal (log-likelihood)","T-distribution","Cauchy (t with df=1)"],["+dnorm()","+dt(df)","+dcauchy()"],["cc ~ add(add.sd) + dnorm()","cc ~a dd(add.sd) + dt(df)","cc ~ add(add.sd) + dcauchy()"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Distribution<\/th>\n      <th>How to Add<\/th>\n      <th>Example<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"name":"Distribution","targets":0},{"name":"How to Add","targets":1},{"name":"Example","targets":2}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script><p>Note that with the normal and t-related distributions
<code>nlmixr2</code> will calculate <code>cwres</code> and
<code>npde</code> under the normal assumption to help assess the
goodness of the fit of the model.</p>
<p>Also note that the <code>+dnorm()</code> is mostly for testing
purposes and will slow down the estimation procedure in
<code>nlmixr2</code>. We suggest not adding it (except for explicit
testing). When there are multiple endpoint models that mix non-normal
and normal distributions, the whole problem is shifted to a
log-likelihood method for estimation in <code>nlmixr2</code>.</p>
</div>
<div class="section level4">
<h4 id="notes-on-additive-proportional-models">Notes on additive + proportional models<a class="anchor" aria-label="anchor" href="#notes-on-additive-proportional-models"></a>
</h4>
<p>There are two different ways to specify additive and proportional
models, which we will call <strong>combined1</strong> and
<strong>combined2</strong>, the same way that Monolix calls the two
distributions (to avoid between software differences in naming).</p>
<p>The first, <strong>combined1</strong>, assumes that the additive and
proportional differences are on the standard deviation scale, or:</p>
<p>y=f+(a+b* f^c)*err</p>
<p>The second, <strong>combined2</strong>, assumes that the additive and
proportional differences are combined on a variance scale:</p>
<p>y=f+<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mi>q</mi><mi>r</mi><mi>t</mi><mrow><mo stretchy="true" form="prefix">(</mo><msup><mi>a</mi><mn>2</mn></msup><mo>+</mo><msup><mi>b</mi><mn>2</mn></msup><mo>*</mo><msup><mi>f</mi><mrow><mo stretchy="true" form="prefix">(</mo><mn>2</mn><mi>c</mi><mo stretchy="true" form="postfix">)</mo></mrow></msup><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">sqrt(a^2+b^2 *f^(2c))</annotation></semantics></math>*err</p>
<p>The default in <code>nlmixr2</code>/<code>rxode2</code> if not
otherwise specified is <strong>combined2</strong> since it mirrors how
adding 2 normal distributions in statistics will add their variances
(not the standard deviations). However, the <strong>combined1</strong>
can describe the data possibly even better than
<strong>combined2</strong> so both are possible options in
<code>rxode2</code>/<code>nlmixr2</code>.</p>
</div>
<div class="section level4">
<h4 id="distributions-of-known-likelihoods">Distributions of known likelihoods<a class="anchor" aria-label="anchor" href="#distributions-of-known-likelihoods"></a>
</h4>
<p>For residuals that are not related to normal, t-distribution or
cauchy, often the residual specification is of the form:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cmt</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/stats/Beta.html" class="external-link">dbeta</a></span><span class="op">(</span><span class="va">alpha</span>, <span class="va">beta</span><span class="op">)</span></span></code></pre></div>
<p>Where the compartment specification is on the left handed side of the
specification.</p>
<p>For generalized likelihood you can specify:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="fu">ll</span>(cmt) <span class="sc">~</span> llik specification</span></code></pre></div>
</div>
<div class="section level4">
<h4 id="ordinal-likelihoods">Ordinal likelihoods<a class="anchor" aria-label="anchor" href="#ordinal-likelihoods"></a>
</h4>
<p>Finally, ordinal likelihoods/simulations can be specified in 2 ways.
The first is:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">err</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">p0</span>, <span class="va">p1</span>, <span class="va">p2</span><span class="op">)</span></span></code></pre></div>
<p>Here <code>err</code> represents the compartment and <code>p0</code>
is the probability of being in a specific category:</p>
<table class="table">
<thead><tr class="header">
<th>Category</th>
<th>Probability</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>p0</td>
</tr>
<tr class="even">
<td>2</td>
<td>p1</td>
</tr>
<tr class="odd">
<td>3</td>
<td>p2</td>
</tr>
<tr class="even">
<td>4</td>
<td>1-p0-p1-p2</td>
</tr>
</tbody>
</table>
<p>It is up to the model to ensure that the sum of the <code>p</code>
values are less than <code>1</code>. Additionally you can write an
arbitrary number of categories in the ordinal model described above.</p>
<p>It seems a little off that <code>p0</code> is the probability for
category <code>1</code> and sometimes scores are in non-whole numbers.
This can be modeled as follows:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">err</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>p0<span class="op">=</span><span class="fl">0</span>, p1<span class="op">=</span><span class="fl">1</span>, p2<span class="op">=</span><span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<p>Here the numeric categories are specified explicitly, and the
probabilities remain the same:</p>
<table class="table">
<thead><tr class="header">
<th>Category</th>
<th>Probability</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>p0</td>
</tr>
<tr class="even">
<td>1</td>
<td>p1</td>
</tr>
<tr class="odd">
<td>2</td>
<td>p2</td>
</tr>
<tr class="even">
<td>3</td>
<td>1-p0-p1-p2</td>
</tr>
</tbody>
</table>
</div>
<div class="section level4">
<h4 id="general-table-of-supported-residual-distributions">General table of supported residual distributions<a class="anchor" aria-label="anchor" href="#general-table-of-supported-residual-distributions"></a>
</h4>
<p>In general all the that are supported are in the following table
(available in <code><a href="../reference/rxResidualError.html">rxode2::rxResidualError</a></code>)</p>
<div class="datatables html-widget html-fill-item" id="htmlwidget-1fb4450895fe099f74a1" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-1fb4450895fe099f74a1">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["constant","proportional","power","additive+proportional","additive+proportional","additive+power","additive+power","constant","proportional","power","additive+proportional","additive+proportional","additive+power","additive+power","constant","proportional","power","additive+proportional","additive+proportional","additive+power","additive+power","constant","proportional","power","additive+proportional","additive+proportional","additive+power","additive+power","constant","proportional","power","additive+proportional","additive+proportional","additive+power","additive+power","additive ","proportional","power","additive+proportional","additive+proportional","additive+power","additive+power","constant","proportional","power","additive+proportional","additive+proportional","additive+power","additive+power","additive ","proportional","power","additive+proportional","additive+proportional","additive+power","additive+power","constant+t","proportional+t","power+t","additive+proportional+t","additive+proportional+t","additive+power+t","additive+power+t","constant+t","proportional+t","power+t","additive+proportional+t","additive+proportional+t","additive+power+t","additive+power+t","constant+t","proportional+t","power+t","additive+proportional+t","additive+proportional+t","additive+power+t","additive+power+t","constant+t","proportional+t","power+t","additive+proportional+t","additive+proportional+t","additive+power+t","additive+power+t","constant+t","proportional+t","power+t","additive+proportional+t","additive+proportional+t","additive+power+t","additive+power+t","additive+t","proportional+t","power+t","additive+proportional+t","additive+proportional+t","additive+power+t","additive+power+t","constant+t","proportional+t","power+t","additive+proportional+t","additive+proportional+t","additive+power+t","additive+power+t","additive+t","proportional+t","power+t","additive+proportional+t","additive+proportional+t","additive+power+t","additive+power+t","constant+cauchy","proportional+cauchy","power+cauchy","additive+proportional+cauchy","additive+proportional+cauchy","additive+power+cauchy","additive+power+cauchy","constant+cauchy","proportional+cauchy","power+cauchy","additive+proportional+cauchy","additive+proportional+cauchy","additive+power+cauchy","additive+power+cauchy","constant+cauchy","proportional+cauchy","power+cauchy","additive+proportional+cauchy","additive+proportional+cauchy","additive+power+cauchy","additive+power+cauchy","constant+cauchy","proportional+cauchy","power+cauchy","additive+proportional+cauchy","additive+proportional+cauchy","additive+power+cauchy","additive+power+cauchy","constant+cauchy","proportional+cauchy","power+cauchy","additive+proportional+cauchy","additive+proportional+cauchy","additive+power+cauchy","additive+power+cauchy","additive+cauchy","proportional+cauchy","power+cauchy","additive+proportional+cauchy","additive+proportional+cauchy","additive+power+cauchy","additive+power+cauchy","constant+cauchy","proportional+cauchy","power+cauchy","additive+proportional+cauchy","additive+proportional+cauchy","additive+power+cauchy","additive+power+cauchy","additive+cauchy","proportional+cauchy","power+cauchy","additive+proportional+cauchy","additive+proportional+cauchy","additive+power+cauchy","additive+power+cauchy","poission","binomial","beta","chisq","exponential","uniform","weibull","gamma","geometric","negative binomial form #1","negative binomial form #2","ordinal probability","log-likelihood"],["","","","combined1","combined2","combined1","combined2","","","","combined1","combined2","combined1","combined2","","","","combined1","combined2","combined1","combined2","","","","combined1","combined2","combined1","combined2","","","","combined1","combined2","combined1","combined2","","","","combined1","combined2","combined1","combined2","","","","combined1","combined2","combined1","combined2","","","","combined1","combined2","combined1","combined2","","","","combined1","combined2","combined1","combined2","","","","combined1","combined2","combined1","combined2","","","","combined1","combined2","combined1","combined2","","","","combined1","combined2","combined1","combined2","","","","combined1","combined2","combined1","combined2","","","","combined1","combined2","combined1","combined2","","","","combined1","combined2","combined1","combined2","","","","combined1","combined2","combined1","combined2","","","","combined1","combined2","combined1","combined2","","","","combined1","combined2","combined1","combined2","","","","combined1","combined2","combined1","combined2","","","","combined1","combined2","combined1","combined2","","","","combined1","combined2","combined1","combined2","","","","combined1","combined2","combined1","combined2","","","","combined1","combined2","combined1","combined2","","","","combined1","combined2","combined1","combined2","","","","","","","","","","","","",""],["None","None","None","None","None","None","None","log","log","log","log","log","log","log","boxCox","boxCox","boxCox","boxCox","boxCox","boxCox","boxCox","yeoJohnson","yeoJohnson","yeoJohnson","yeoJohnson","yeoJohnson","yeoJohnson","yeoJohnson","logit","logit","logit","logit","logit","logit","logit","yeoJohnson(logit())","yeoJohnson(logit())","yeoJohnson(logit())","yeoJohnson(logit())","yeoJohnson(logit())","yeoJohnson(logit())","yeoJohnson(logit())","logit","probit","probit","probit","probit","probit","probit","yeoJohnson(probit())","yeoJohnson(probit())","yeoJohnson(probit())","yeoJohnson(probit())","yeoJohnson(probit())","yeoJohnson(probit())","yeoJohnson(probit())","None","None","None","None","None","None","None","log","log","log","log","log","log","log","boxCox","boxCox","boxCox","boxCox","boxCox","boxCox","boxCox","yeoJohnson","yeoJohnson","yeoJohnson","yeoJohnson","yeoJohnson","yeoJohnson","yeoJohnson","logit","logit","logit","logit","logit","logit","logit","yeoJohnson(logit())","yeoJohnson(logit())","yeoJohnson(logit())","yeoJohnson(logit())","yeoJohnson(logit())","yeoJohnson(logit())","yeoJohnson(logit())","logit","probit","probit","probit","probit","probit","probit","yeoJohnson(probit())","yeoJohnson(probit())","yeoJohnson(probit())","yeoJohnson(probit())","yeoJohnson(probit())","yeoJohnson(probit())","yeoJohnson(probit())","None","None","None","None","None","None","None","log","log","log","log","log","log","log","boxCox","boxCox","boxCox","boxCox","boxCox","boxCox","boxCox","yeoJohnson","yeoJohnson","yeoJohnson","yeoJohnson","yeoJohnson","yeoJohnson","yeoJohnson","logit","logit","logit","logit","logit","logit","logit","yeoJohnson(logit())","yeoJohnson(logit())","yeoJohnson(logit())","yeoJohnson(logit())","yeoJohnson(logit())","yeoJohnson(logit())","yeoJohnson(logit())","logit","probit","probit","probit","probit","probit","probit","yeoJohnson(probit())","yeoJohnson(probit())","yeoJohnson(probit())","yeoJohnson(probit())","yeoJohnson(probit())","yeoJohnson(probit())","yeoJohnson(probit())","none","none","none","none","none","none","none","none","none","none","none","none","none"],["var ~ add(add.sd)","var ~ prop(prop.sd)","var ~ pow(pow.sd, exponent)","var ~ add(add.sd) + prop(prop.sd) + combined1()","var ~ add(add.sd) + prop(prop.sd) + combined2()","var ~ add(add.sd) + pow(pow.sd, exponent) + combined1()","var ~ add(add.sd) + pow(pow.sd, exponent) + combined2()","var ~ lnorm(add.sd)","var ~ lnorm(NA) + prop(prop.sd)","var ~ lnorm(NA) + pow(pow.sd, exponent)","var ~ lnorm(add.sd) + prop(prop.sd) + combined1()","var ~ lnorm(add.sd) + prop(prop.sd) + combined2()","var ~ lnorm(add.sd) + pow(pow.sd, exponent) + combined1()","var ~ lnorm(add.sd) + pow(pow.sd, exponent) + combined2()","var ~ boxCox(lambda) + add(add.sd)","var ~ boxCox(lambda) + prop(prop.sd)","var ~ boxCox(lambda) + pow(pow.sd, exponent)","var ~ boxCox(lambda) + add(add.sd) + prop(prop.sd) + combined1()","var ~ boxCox(lambda) + add(add.sd) + prop(prop.sd) + combined2()","var ~ boxCox(lambda) + add(add.sd) + pow(pop.sd, exponent) + combined1()","var ~ boxCox(lambda) + add(add.sd) + pow(pop.sd, exponent) + combined2()","var ~ yeoJohnson(lambda) + add(add.sd)","var ~ yeoJohnson(lambda) + prop(prop.sd)","var ~ yeoJohnson(lambda) + pow(pow.sd, exponent)","var ~ yeoJohnson(lambda) + add(add.sd) + prop(prop.sd) + combined1()","var ~ yeoJohnson(lambda) + add(add.sd) + prop(prop.sd) + combined2()","var ~ yeoJohnson(lambda) + add(add.sd) + pow(pop.sd, exponent) + combined1()","var ~ yeoJohnson(lambda) + add(add.sd) + pow(pop.sd, exponent) + combined2()","var ~ logitNorm(logit.sd)","var ~ logitNorm(NA) + prop(prop.sd)","var ~ logitNorm(NA) + pow(pow.sd, exponent)","var ~ logitNorm(logit.sd) + prop(prop.sd)","var ~ logitNorm(logit.sd) + prop(prop.sd)","var ~ logitNorm(logit.sd) + pow(pow.sd, exponent)","var ~ logitNorm(logit.sd) + pow(pow.sd, exponent)","var ~ yeoJohnson(lambda) + logitNorm(logit.sd)","var ~ yeoJohnson(lambda) + logitNorm(NA) + prop(prop.sd)","var ~ yeoJohnson(lambda) + logitNorm(NA) + pow(pow.sd, exponent)","var ~ yeoJohnson(lambda) + logitNorm(logit.sd) + prop(prop.sd)","var ~ yeoJohnson(lambda) + logitNorm(logit.sd) + prop(prop.sd)","var ~ yeoJohnson(lambda) + logitNorm(logit.sd) + pow(pow.sd, exponent)","var ~ yeoJohnson(lambda) + logitNorm(logit.sd) + pow(pow.sd, exponent)","var ~ probitNorm(probit.sd)","var ~ probitNorm(NA) + prop(prop.sd)","var ~ probitNorm(NA) + pow(pow.sd, exponent)","var ~ probitNorm(probit.sd) + prop(prop.sd) + combined1()","var ~ probitNorm(probit.sd) + prop(prop.sd) + combined2()","var ~ probitNorm(probit.sd) + pow(pow.sd, exponent) + combined1()","var ~ probitNorm(probit.sd) + pow(pow.sd, exponent) + combined2()","var ~ yeoJohnson(lambda) + probitNorm(probit.sd)","var ~ yeoJohnson(lambda) + probitNorm(NA) + prop(prop.sd)","var ~ yeoJohnson(lambda) + probitNorm(NA) + pow(pow.sd, exponent)","var ~ yeoJohnson(lambda) + probitNorm(probit.sd) + prop(prop.sd) + combined1()","var ~ yeoJohnson(lambda) + probitNorm(probit.sd) + prop(prop.sd) + combined2()","var ~ yeoJohnson(lambda) + probitNorm(probit.sd) + pow(pow.sd, exponent) + combined1()","var ~ yeoJohnson(lambda) + probitNorm(probit.sd) + pow(pow.sd, exponent) + combined2()","var ~ add(add.sd) + dt(df)","var ~ prop(prop.sd) + dt(df)","var ~ pow(pow.sd, exponent) + dt(df)","var ~ add(add.sd) + prop(prop.sd) + dt(df) + combined1()","var ~ add(add.sd) + prop(prop.sd) + dt(df) + combined2()","var ~ add(add.sd) + pow(pow.sd, exponent) + dt(df) +combined1()","var ~ add(add.sd) + pow(pow.sd, exponent) + dt(df) +combined2()","var ~ lnorm(add.sd) + dt(df)","var ~ lnorm(NA) + prop(prop.sd) + dt(df)","var ~ lnorm(NA) + pow(pow.sd, exponent) + dt(df)","var ~ lnorm(add.sd) + prop(prop.sd) + dt(df) +combined1()","var ~ lnorm(add.sd) + prop(prop.sd) + dt(df) + combined2()","var ~ lnorm(add.sd) + pow(pow.sd, exponent) + dt(df) + combined1()","var ~ lnorm(add.sd) + pow(pow.sd, exponent) + dt(df) + combined2()","var ~ boxCox(lambda) + add(add.sd)+dt(df)","var ~ boxCox(lambda) + prop(prop.sd)+dt(df)","var ~ boxCox(lambda) + pow(pow.sd, exponent)+dt(df)","var ~ boxCox(lambda) + add(add.sd) + prop(prop.sd) + dt(df) + combined1()","var ~ boxCox(lambda) + add(add.sd) + prop(prop.sd) + dt(df) + combined2()","var ~ boxCox(lambda) + add(add.sd) + pow(pop.sd, exponent) + dt(df) + combined1()","var ~ boxCox(lambda) + add(add.sd) + pow(pop.sd, exponent) + dt(df) + combined2()","var ~ yeoJohnson(lambda) + add(add.sd) + dt(df)","var ~ yeoJohnson(lambda) + prop(prop.sd) + dt(df)","var ~ yeoJohnson(lambda) + pow(pow.sd, exponent) + dt(df)","var ~ yeoJohnson(lambda) + add(add.sd) + prop(prop.sd) + dt(df) + combined1()","var ~ yeoJohnson(lambda) + add(add.sd) + prop(prop.sd) + dt(df) + combined2()","var ~ yeoJohnson(lambda) + add(add.sd) + pow(pop.sd, exponent) + dt(df) + combined1()","var ~ yeoJohnson(lambda) + add(add.sd) + pow(pop.sd, exponent) + dt(df) + combined2()","var ~ logitNorm(logit.sd)+dt(df)","var ~ logitNorm(NA) + prop(prop.sd)+dt(df)","var ~ logitNorm(NA) + pow(pow.sd, exponent) + dt(df)","var ~ logitNorm(logit.sd) + prop(prop.sd) + dt(df) + combined1()","var ~ logitNorm(logit.sd) + prop(prop.sd) + dt(df) + combined2()","var ~ logitNorm(logit.sd) + pow(pow.sd, exponent) + dt(df) + combined1()","var ~ logitNorm(logit.sd) + pow(pow.sd, exponent) + dt(df) + combined2()","var ~ yeoJohnson(lambda) + logitNorm(logit.sd) + dt(df)","var ~ yeoJohnson(lambda) + logitNorm(NA) + prop(prop.sd) + dt(df)","var ~ yeoJohnson(lambda) + logitNorm(NA) + pow(pow.sd, exponent) + dt(df)","var ~ yeoJohnson(lambda) + logitNorm(logit.sd) + prop(prop.sd) + dt(df) + combined1()","var ~ yeoJohnson(lambda) + logitNorm(logit.sd) + prop(prop.sd) + dt(df) + combined2()","var ~ yeoJohnson(lambda) + logitNorm(logit.sd) + pow(pow.sd, exponent) + dt(df) + combined1()","var ~ yeoJohnson(lambda) + logitNorm(logit.sd) + pow(pow.sd, exponent) + dt(df) + combined2()","var ~ probitNorm(probit.sd) + dt(df)","var ~ probitNorm(NA) + prop(prop.sd) + dt(df)","var ~ probitNorm(NA) + pow(pow.sd, exponent) + dt(df)","var ~ probitNorm(probit.sd) + prop(prop.sd) + dt(df) + combined1()","var ~ probitNorm(probit.sd) + prop(prop.sd) + dt(df) + combined2()","var ~ probitNorm(probit.sd) + pow(pow.sd, exponent) + dt(df) + combined1()","var ~ probitNorm(probit.sd) + pow(pow.sd, exponent) + dt(df) + combined2()","var ~ yeoJohnson(lambda) + probitNorm(probit.sd) + dt(df)","var ~ yeoJohnson(lambda) + probitNorm(NA) + prop(prop.sd) + dt(df)","var ~ yeoJohnson(lambda) + probitNorm(NA) + pow(pow.sd, exponent) + dt(df)","var ~ yeoJohnson(lambda) + probitNorm(probit.sd) + prop(prop.sd) + dt(df) + combined1()","var ~ yeoJohnson(lambda) + probitNorm(probit.sd) + prop(prop.sd) + dt(df) + combined2()","var ~ yeoJohnson(lambda) + probitNorm(probit.sd) + pow(pow.sd, exponent) + dt(df) + combined1()","var ~ yeoJohnson(lambda) + probitNorm(probit.sd) + pow(pow.sd, exponent) + dt(df) +combined2()","var ~ add(add.sd) + dcauchy()","var ~ prop(prop.sd) + dcauchy()","var ~ pow(pow.sd, exponent) + dcauchy()","var ~ add(add.sd) + prop(prop.sd) + dcauchy() + combined1()","var ~ add(add.sd) + prop(prop.sd) + dcauchy() + combined2()","var ~ add(add.sd) + pow(pow.sd, exponent) + dcauchy() +combined1()","var ~ add(add.sd) + pow(pow.sd, exponent) + dcauchy() +combined2()","var ~ lnorm(add.sd) + dcauchy()","var ~ lnorm(NA) + prop(prop.sd) + dcauchy()","var ~ lnorm(NA) + pow(pow.sd, exponent) + dcauchy()","var ~ lnorm(add.sd) + prop(prop.sd) + dcauchy() +combined1()","var ~ lnorm(add.sd) + prop(prop.sd) + dcauchy() + combined2()","var ~ lnorm(add.sd) + pow(pow.sd, exponent) + dcauchy() + combined1()","var ~ lnorm(add.sd) + pow(pow.sd, exponent) + dcauchy() + combined2()","var ~ boxCox(lambda) + add(add.sd)+dcauchy()","var ~ boxCox(lambda) + prop(prop.sd)+dcauchy()","var ~ boxCox(lambda) + pow(pow.sd, exponent)+dcauchy()","var ~ boxCox(lambda) + add(add.sd) + prop(prop.sd) + dcauchy() + combined1()","var ~ boxCox(lambda) + add(add.sd) + prop(prop.sd) + dcauchy() + combined2()","var ~ boxCox(lambda) + add(add.sd) + pow(pop.sd, exponent) + dcauchy() + combined1()","var ~ boxCox(lambda) + add(add.sd) + pow(pop.sd, exponent) + dcauchy() + combined2()","var ~ yeoJohnson(lambda) + add(add.sd) + dcauchy()","var ~ yeoJohnson(lambda) + prop(prop.sd) + dcauchy()","var ~ yeoJohnson(lambda) + pow(pow.sd, exponent) + dcauchy()","var ~ yeoJohnson(lambda) + add(add.sd) + prop(prop.sd) + dcauchy() + combined1()","var ~ yeoJohnson(lambda) + add(add.sd) + prop(prop.sd) + dcauchy() + combined2()","var ~ yeoJohnson(lambda) + add(add.sd) + pow(pop.sd, exponent) + dcauchy() + combined1()","var ~ yeoJohnson(lambda) + add(add.sd) + pow(pop.sd, exponent) + dcauchy() + combined2()","var ~ logitNorm(logit.sd)+dcauchy()","var ~ logitNorm(NA) + prop(prop.sd)+dcauchy()","var ~ logitNorm(NA) + pow(pow.sd, exponent) + dcauchy()","var ~ logitNorm(logit.sd) + prop(prop.sd) + dcauchy() + combined1()","var ~ logitNorm(logit.sd) + prop(prop.sd) + dcauchy() + combined2()","var ~ logitNorm(logit.sd) + pow(pow.sd, exponent) + dcauchy() + combined1()","var ~ logitNorm(logit.sd) + pow(pow.sd, exponent) + dcauchy() + combined2()","var ~ yeoJohnson(lambda) + logitNorm(logit.sd) + dcauchy()","var ~ yeoJohnson(lambda) + logitNorm(NA) + prop(prop.sd) + dcauchy()","var ~ yeoJohnson(lambda) + logitNorm(NA) + pow(pow.sd, exponent) + dcauchy()","var ~ yeoJohnson(lambda) + logitNorm(logit.sd) + prop(prop.sd) + dcauchy() + combined1()","var ~ yeoJohnson(lambda) + logitNorm(logit.sd) + prop(prop.sd) + dcauchy() + combined2()","var ~ yeoJohnson(lambda) + logitNorm(logit.sd) + pow(pow.sd, exponent) + dcauchy() + combined1()","var ~ yeoJohnson(lambda) + logitNorm(logit.sd) + pow(pow.sd, exponent) + dcauchy() + combined2()","var ~ probitNorm(probit.sd) + dcauchy()","var ~ probitNorm(NA) + prop(prop.sd) + dcauchy()","var ~ probitNorm(NA) + pow(pow.sd, exponent) + dcauchy()","var ~ probitNorm(probit.sd) + prop(prop.sd) + dcauchy() + combined1()","var ~ probitNorm(probit.sd) + prop(prop.sd) + dcauchy() + combined2()","var ~ probitNorm(probit.sd) + pow(pow.sd, exponent) + dcauchy() + combined1()","var ~ probitNorm(probit.sd) + pow(pow.sd, exponent) + dcauchy() + combined2()","var ~ yeoJohnson(lambda) + probitNorm(probit.sd) + dcauchy()","var ~ yeoJohnson(lambda) + probitNorm(NA) + prop(prop.sd) + dcauchy()","var ~ yeoJohnson(lambda) + probitNorm(NA) + pow(pow.sd, exponent) + dcauchy()","var ~ yeoJohnson(lambda) + probitNorm(probit.sd) + prop(prop.sd) + dcauchy() + combined1()","var ~ yeoJohnson(lambda) + probitNorm(probit.sd) + prop(prop.sd) + dcauchy() + combined2()","var ~ yeoJohnson(lambda) + probitNorm(probit.sd) + pow(pow.sd, exponent) + dcauchy() + combined1()","var ~ yeoJohnson(lambda) + probitNorm(probit.sd) + pow(pow.sd, exponent) + dcauchy() +combined2()","cmt ~ dpois(lamba)","cmt ~ dbinom(n, p)","cmt ~ dbeta(alpha, beta)","cmt ~ dchisq(nu)","cmt ~ dexp(r)","cmt ~ dunif(a, b)","cmt ~ dweibull(a, b)","cmt ~ dgamma(a, b)","cmt ~ dgeom(a)","cmt ~ dnbinom(n, p)","cmt ~ dnbinomMu(size, mu)","cmt ~ c(p0=0, p1=1, p2=2, 3)","ll(cmt) ~ log likelihood expression"],["","","","addProp=1","addProp=2","addProp=1","addProp=2","","","","addProp=1","addProp=2","addProp=1","addProp=2","","","","addProp=1","addProp=2","addProp=1","addProp=2","","","","addProp=1","addProp=2","addProp=1","addProp=2","","","","addProp=1","addProp=2","addProp=1","addProp=2","","","","addProp=1","addProp=2","addProp=1","addProp=2","","","","addProp=1","addProp=2","addProp=1","addProp=2","","","","addProp=1","addProp=2","addProp=1","addProp=2","","","","addProp=1","addProp=2","addProp=1","addProp=2","","","","addProp=1","addProp=2","addProp=1","addProp=2","","","","addProp=1","addProp=2","addProp=1","addProp=2","","","","addProp=1","addProp=2","addProp=1","addProp=2","","","","addProp=1","addProp=2","addProp=1","addProp=2","","","","addProp=1","addProp=2","addProp=1","addProp=2","","","","addProp=1","addProp=2","addProp=1","addProp=2","","","","addProp=1","addProp=2","addProp=1","addProp=2","","","","addProp=1","addProp=2","addProp=1","addProp=2","","","","addProp=1","addProp=2","addProp=1","addProp=2","","","","addProp=1","addProp=2","addProp=1","addProp=2","","","","addProp=1","addProp=2","addProp=1","addProp=2","","","","addProp=1","addProp=2","addProp=1","addProp=2","","","","addProp=1","addProp=2","addProp=1","addProp=2","","","","addProp=1","addProp=2","addProp=1","addProp=2","","","","addProp=1","addProp=2","addProp=1","addProp=2","","","","","","","","","","","","",""],["response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","response variable","compartment specification","compartment specification","compartment specification","compartment specification","compartment specification","compartment specification","compartment specification","compartment specification","compartment specification","compartment specification","compartment specification","compartment specification","likelihood + compartment expression"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Error model<\/th>\n      <th>Functional Form<\/th>\n      <th>Transformation<\/th>\n      <th>code<\/th>\n      <th>addProp<\/th>\n      <th>lhs<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"name":"Error model","targets":0},{"name":"Functional Form","targets":1},{"name":"Transformation","targets":2},{"name":"code","targets":3},{"name":"addProp","targets":4},{"name":"lhs","targets":5}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="section level2">
<h2 id="note-on-strings-in-rxode2">Note on strings in rxode2<a class="anchor" aria-label="anchor" href="#note-on-strings-in-rxode2"></a>
</h2>
<p>Strings are converted to double values inside of <code>rxode2</code>,
hence you can refer to them as an integer corresponding to the string
value or the string value itself. For covariates these are calculated on
the fly based on your data and you should likely not try this, though
you should be aware. For strings defined in the model, this is fixed and
both could be used.</p>
<p>For example:</p>
<pre><code><span><span class="kw">if</span> <span class="op">(</span><span class="va">APGAR</span> <span class="op">==</span> <span class="fl">10</span> <span class="op">||</span> <span class="va">APGAR</span> <span class="op">==</span> <span class="fl">8</span> <span class="op">||</span> <span class="va">APGAR</span> <span class="op">==</span> <span class="fl">9</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">tAPGAR</span> <span class="op">&lt;-</span> <span class="st">"High"</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">APGAR</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">||</span> <span class="va">APGAR</span> <span class="op">==</span> <span class="fl">2</span> <span class="op">||</span> <span class="va">APGAR</span> <span class="op">==</span> <span class="fl">3</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">tAPGAR</span> <span class="op">&lt;-</span> <span class="st">"Low"</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">APGAR</span> <span class="op">==</span> <span class="fl">4</span> <span class="op">||</span> <span class="va">APGAR</span> <span class="op">==</span> <span class="fl">5</span> <span class="op">||</span> <span class="va">APGAR</span> <span class="op">==</span> <span class="fl">6</span> <span class="op">||</span> <span class="va">APGAR</span> <span class="op">==</span> <span class="fl">7</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">tAPGAR</span> <span class="op">&lt;-</span> <span class="st">"Med"</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="va">tAPGAR</span><span class="op">&lt;-</span> <span class="st">"Med"</span></span>
<span>  <span class="op">}</span></span></code></pre>
<p>Could also be replaced by:</p>
<pre><code><span><span class="kw">if</span> <span class="op">(</span><span class="va">APGAR</span> <span class="op">==</span> <span class="fl">10</span> <span class="op">||</span> <span class="va">APGAR</span> <span class="op">==</span> <span class="fl">8</span> <span class="op">||</span> <span class="va">APGAR</span> <span class="op">==</span> <span class="fl">9</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">tAPGAR</span> <span class="op">&lt;-</span> <span class="st">"High"</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">APGAR</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">||</span> <span class="va">APGAR</span> <span class="op">==</span> <span class="fl">2</span> <span class="op">||</span> <span class="va">APGAR</span> <span class="op">==</span> <span class="fl">3</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">tAPGAR</span> <span class="op">&lt;-</span> <span class="st">"Low"</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">APGAR</span> <span class="op">==</span> <span class="fl">4</span> <span class="op">||</span> <span class="va">APGAR</span> <span class="op">==</span> <span class="fl">5</span> <span class="op">||</span> <span class="va">APGAR</span> <span class="op">==</span> <span class="fl">6</span> <span class="op">||</span> <span class="va">APGAR</span> <span class="op">==</span> <span class="fl">7</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">tAPGAR</span> <span class="op">&lt;-</span> <span class="st">"Med"</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="va">tAPGAR</span><span class="op">&lt;-</span> <span class="fl">3</span></span>
<span>  <span class="op">}</span></span></code></pre>
<p>Since <code>"Med"</code> is already defined</p>
<p>If you wanted you can pre-declare what levels it has (and the order)
to give you better control of this:</p>
<pre><code><span><span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">tAPGAR</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Med"</span>, <span class="st">"Low"</span>, <span class="st">"High"</span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="va">APGAR</span> <span class="op">==</span> <span class="fl">10</span> <span class="op">||</span> <span class="va">APGAR</span> <span class="op">==</span> <span class="fl">8</span> <span class="op">||</span> <span class="va">APGAR</span> <span class="op">==</span> <span class="fl">9</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">tAPGAR</span> <span class="op">&lt;-</span> <span class="fl">3</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">APGAR</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">||</span> <span class="va">APGAR</span> <span class="op">==</span> <span class="fl">2</span> <span class="op">||</span> <span class="va">APGAR</span> <span class="op">==</span> <span class="fl">3</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">tAPGAR</span> <span class="op">&lt;-</span> <span class="fl">2</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">APGAR</span> <span class="op">==</span> <span class="fl">4</span> <span class="op">||</span> <span class="va">APGAR</span> <span class="op">==</span> <span class="fl">5</span> <span class="op">||</span> <span class="va">APGAR</span> <span class="op">==</span> <span class="fl">6</span> <span class="op">||</span> <span class="va">APGAR</span> <span class="op">==</span> <span class="fl">7</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">tAPGAR</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="va">tAPGAR</span><span class="op">&lt;-</span> <span class="fl">1</span></span>
<span>  <span class="op">}</span></span></code></pre>
<p>You can see that the number changed since the declaration change the
numbers in each variable for <code>tAPGAR</code>. These
<code><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels()</a></code> statements need to be declared before the variable
occurs to ensure the numbering is consistent with what is declared.</p>
<div class="section level3">
<h3 id="bugs-andor-deficiencies">Bugs and/or deficiencies<a class="anchor" aria-label="anchor" href="#bugs-andor-deficiencies"></a>
</h3>
<ul>
<li>The modulo operator <code>%%</code> is currently unsupported.</li>
</ul>
</div>
<div class="section level3">
<h3 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a>
</h3>
<p>The ODE specification mini-language is parsed with the help of the
open source tool , Plevyak (2015).</p>
</div>
<div class="section level3">
<h3 id="example-model">Example model<a class="anchor" aria-label="anchor" href="#example-model"></a>
</h3>
<p>Below is a commented example to quickly show the capabilities of
<code>rxode2</code> syntax.</p>
</div>
<div class="section level3">
<h3 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h3>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/ini.html">ini</a></span><span class="op">(</span><span class="op">{</span></span>
<span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="../reference/model.html">model</a></span><span class="op">(</span><span class="op">{</span></span>
<span>    <span class="co"># An rxode2 model specification (this line is a comment).</span></span>
<span></span>
<span>    <span class="kw">if</span><span class="op">(</span><span class="va">comed</span><span class="op">==</span><span class="fl">0</span><span class="op">)</span> <span class="op">{</span>  <span class="co"># concomitant medication (con-med)?</span></span>
<span>      <span class="cn">F</span> <span class="op">&lt;-</span> <span class="fl">1.0</span>     <span class="co"># full bioavailability w.o. con-med</span></span>
<span>    <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>      <span class="cn">F</span> <span class="op">&lt;-</span> <span class="fl">0.80</span>    <span class="co"># 20% reduced bioavailability</span></span>
<span>    <span class="op">}</span></span>
<span></span>
<span>    <span class="va">C2</span> <span class="op">&lt;-</span> <span class="va">centr</span><span class="op">/</span><span class="va">V2</span>  <span class="co"># concentration in the central compartment</span></span>
<span>    <span class="va">C3</span> <span class="op">&lt;-</span> <span class="va">peri</span><span class="op">/</span><span class="va">V3</span>   <span class="co"># concentration in the peripheral compartment</span></span>
<span></span>
<span>    <span class="co"># ODE describing the PK and PD</span></span>
<span></span>
<span>    <span class="va">d</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/stats/TDist.html" class="external-link">dt</a></span><span class="op">(</span><span class="va">depot</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="op">-</span><span class="va">KA</span><span class="op">*</span><span class="va">depot</span></span>
<span>    <span class="va">d</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/stats/TDist.html" class="external-link">dt</a></span><span class="op">(</span><span class="va">centr</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="cn">F</span><span class="op">*</span><span class="va">KA</span><span class="op">*</span><span class="va">depot</span> <span class="op">-</span> <span class="va">CL</span><span class="op">*</span><span class="va">C2</span> <span class="op">-</span> <span class="va">Q</span><span class="op">*</span><span class="va">C2</span> <span class="op">+</span> <span class="va">Q</span><span class="op">*</span><span class="va">C3</span></span>
<span>    <span class="va">d</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/stats/TDist.html" class="external-link">dt</a></span><span class="op">(</span><span class="va">peri</span><span class="op">)</span>  <span class="op">&lt;-</span>                      <span class="va">Q</span><span class="op">*</span><span class="va">C2</span> <span class="op">-</span> <span class="va">Q</span><span class="op">*</span><span class="va">C3</span></span>
<span>    <span class="va">d</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/stats/TDist.html" class="external-link">dt</a></span><span class="op">(</span><span class="va">eff</span><span class="op">)</span>   <span class="op">&lt;-</span> <span class="va">Kin</span> <span class="op">-</span> <span class="va">Kout</span><span class="op">*</span><span class="op">(</span><span class="fl">1</span><span class="op">-</span><span class="va">C2</span><span class="op">/</span><span class="op">(</span><span class="va">EC50</span><span class="op">+</span><span class="va">C2</span><span class="op">)</span><span class="op">)</span><span class="op">*</span><span class="va">eff</span></span>
<span>    <span class="fu">eff</span><span class="op">(</span><span class="fl">0</span><span class="op">)</span>      <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="interface-and-data-handling-between-r-and-the-generated-c-code">Interface and data handling between R and the generated C code<a class="anchor" aria-label="anchor" href="#interface-and-data-handling-between-r-and-the-generated-c-code"></a>
</h3>
<p>Users specify which variables are the dynamic system’s state
variables via the <code>d/dt(identifier)</code> operator as part of the
model specification, and which are model parameters via the
<code>params=</code> argument in <code>rxode2</code>
<code><a href="https://rdrr.io/pkg/symengine/man/solve.html" class="external-link">solve()</a></code> method:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">m1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rxode2.html">rxode2</a></span><span class="op">(</span>model <span class="op">=</span> <span class="va">ode</span>, modName <span class="op">=</span> <span class="st">"m1"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># model parameters -- a named vector is required</span></span>
<span><span class="va">theta</span> <span class="op">&lt;-</span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>KA<span class="op">=</span><span class="fl">0.29</span>, CL<span class="op">=</span><span class="fl">18.6</span>, V2<span class="op">=</span><span class="fl">40.2</span>, Q<span class="op">=</span><span class="fl">10.5</span>, V3<span class="op">=</span><span class="fl">297</span>, Kin<span class="op">=</span><span class="fl">1</span>, Kout<span class="op">=</span><span class="fl">1</span>, EC50<span class="op">=</span><span class="fl">200</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># state variables and their amounts at time 0 (the use of names is</span></span>
<span><span class="co"># encouraged, but not required)</span></span>
<span><span class="va">inits</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>depot<span class="op">=</span><span class="fl">0</span>, centr<span class="op">=</span><span class="fl">0</span>, peri<span class="op">=</span><span class="fl">0</span>, eff<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># qd1 is an eventTable specification with a set of dosing and sampling</span></span>
<span><span class="co"># records (code not shown here)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/symengine/man/solve.html" class="external-link">solve</a></span><span class="op">(</span><span class="va">theta</span>, event <span class="op">=</span> <span class="va">qd1</span>, inits <span class="op">=</span> <span class="va">inits</span><span class="op">)</span></span></code></pre></div>
<p>The values of these variables at pre-specified time points are saved
during model fitting/integration and returned as part of the fitted
values (see the function <code><a href="../reference/et.html">et()</a></code>, to define a set of time
points when to capture the values of these variables) and returned as
part of the modeling output.</p>
<p>The ODE specification mini-language is parsed with the help of the
open source tool <em>DParser</em>, Plevyak (2015).</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Matthew L. Fidler, Wenping Wang, Melissa Hallow.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
