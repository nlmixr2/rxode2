if (!.Call(`_rxode2_isIntel`)) {
  test_that("sumProd test", {

    f <- "effect(0)=exp(ETA[8]+THETA[10])\nd/dt(depot)=-exp(ETA[1]+THETA[1])*depot\nd/dt(gut)=exp(ETA[1]+THETA[1])*depot-exp(ETA[2]+THETA[2])*gut\nd/dt(center)=exp(ETA[2]+THETA[2])*gut-exp(ETA[3]+THETA[3]-(ETA[4]+THETA[4]))*center\nd/dt(effect)=-exp(ETA[7]+THETA[9])*effect+exp(ETA[7]+ETA[8]+THETA[10]+THETA[9])*(1-1*exp(-(ETA[4]+THETA[4]))*center/((1+exp(-(ETA[5]+THETA[7])))*(exp(-(ETA[4]+THETA[4]))*center+exp(ETA[6]+THETA[8]))))\nd/dt(rx__sens_depot_BY_ETA_1___)=-exp(ETA[1]+THETA[1])*depot-exp(ETA[1]+THETA[1])*rx__sens_depot_BY_ETA_1___\nd/dt(rx__sens_gut_BY_ETA_1___)=exp(ETA[1]+THETA[1])*depot+exp(ETA[1]+THETA[1])*rx__sens_depot_BY_ETA_1___-exp(ETA[2]+THETA[2])*rx__sens_gut_BY_ETA_1___\nd/dt(rx__sens_center_BY_ETA_1___)=exp(ETA[2]+THETA[2])*rx__sens_gut_BY_ETA_1___-exp(ETA[3]+THETA[3]-(ETA[4]+THETA[4]))*rx__sens_center_BY_ETA_1___\nd/dt(rx__sens_effect_BY_ETA_1___)=-exp(ETA[7]+THETA[9])*rx__sens_effect_BY_ETA_1___+exp(ETA[7]+ETA[8]+THETA[10]+THETA[9])*rx__sens_center_BY_ETA_1___*(-1*exp(-(ETA[4]+THETA[4]))/((1+exp(-(ETA[5]+THETA[7])))*(exp(-(ETA[4]+THETA[4]))*center+exp(ETA[6]+THETA[8])))+1*exp(-2*(ETA[4]+THETA[4]))*center/((1+exp(-(ETA[5]+THETA[7])))*Rx_pow_di((exp(-(ETA[4]+THETA[4]))*center+exp(ETA[6]+THETA[8])),2)))\nd/dt(rx__sens_depot_BY_ETA_2___)=-exp(ETA[1]+THETA[1])*rx__sens_depot_BY_ETA_2___\nd/dt(rx__sens_gut_BY_ETA_2___)=exp(ETA[1]+THETA[1])*rx__sens_depot_BY_ETA_2___-exp(ETA[2]+THETA[2])*gut-exp(ETA[2]+THETA[2])*rx__sens_gut_BY_ETA_2___\nd/dt(rx__sens_center_BY_ETA_2___)=exp(ETA[2]+THETA[2])*gut+exp(ETA[2]+THETA[2])*rx__sens_gut_BY_ETA_2___-exp(ETA[3]+THETA[3]-(ETA[4]+THETA[4]))*rx__sens_center_BY_ETA_2___\nd/dt(rx__sens_effect_BY_ETA_2___)=-exp(ETA[7]+THETA[9])*rx__sens_effect_BY_ETA_2___+exp(ETA[7]+ETA[8]+THETA[10]+THETA[9])*rx__sens_center_BY_ETA_2___*(-1*exp(-(ETA[4]+THETA[4]))/((1+exp(-(ETA[5]+THETA[7])))*(exp(-(ETA[4]+THETA[4]))*center+exp(ETA[6]+THETA[8])))+1*exp(-2*(ETA[4]+THETA[4]))*center/((1+exp(-(ETA[5]+THETA[7])))*Rx_pow_di((exp(-(ETA[4]+THETA[4]))*center+exp(ETA[6]+THETA[8])),2)))\nd/dt(rx__sens_depot_BY_ETA_3___)=-exp(ETA[1]+THETA[1])*rx__sens_depot_BY_ETA_3___\nd/dt(rx__sens_gut_BY_ETA_3___)=exp(ETA[1]+THETA[1])*rx__sens_depot_BY_ETA_3___-exp(ETA[2]+THETA[2])*rx__sens_gut_BY_ETA_3___\nd/dt(rx__sens_center_BY_ETA_3___)=exp(ETA[2]+THETA[2])*rx__sens_gut_BY_ETA_3___-exp(ETA[3]+THETA[3]-(ETA[4]+THETA[4]))*center-exp(ETA[3]+THETA[3]-(ETA[4]+THETA[4]))*rx__sens_center_BY_ETA_3___\nd/dt(rx__sens_effect_BY_ETA_3___)=-exp(ETA[7]+THETA[9])*rx__sens_effect_BY_ETA_3___+exp(ETA[7]+ETA[8]+THETA[10]+THETA[9])*rx__sens_center_BY_ETA_3___*(-1*exp(-(ETA[4]+THETA[4]))/((1+exp(-(ETA[5]+THETA[7])))*(exp(-(ETA[4]+THETA[4]))*center+exp(ETA[6]+THETA[8])))+1*exp(-2*(ETA[4]+THETA[4]))*center/((1+exp(-(ETA[5]+THETA[7])))*Rx_pow_di((exp(-(ETA[4]+THETA[4]))*center+exp(ETA[6]+THETA[8])),2)))\nd/dt(rx__sens_depot_BY_ETA_4___)=-exp(ETA[1]+THETA[1])*rx__sens_depot_BY_ETA_4___\nd/dt(rx__sens_gut_BY_ETA_4___)=exp(ETA[1]+THETA[1])*rx__sens_depot_BY_ETA_4___-exp(ETA[2]+THETA[2])*rx__sens_gut_BY_ETA_4___\nd/dt(rx__sens_center_BY_ETA_4___)=exp(ETA[2]+THETA[2])*rx__sens_gut_BY_ETA_4___+exp(ETA[3]+THETA[3]-(ETA[4]+THETA[4]))*center-exp(ETA[3]+THETA[3]-(ETA[4]+THETA[4]))*rx__sens_center_BY_ETA_4___\nd/dt(rx__sens_effect_BY_ETA_4___)=-exp(ETA[7]+THETA[9])*rx__sens_effect_BY_ETA_4___+exp(ETA[7]+ETA[8]+THETA[10]+THETA[9])*(-1*exp(-2*(ETA[4]+THETA[4]))*Rx_pow_di(center,2)/((1+exp(-(ETA[5]+THETA[7])))*Rx_pow_di((exp(-(ETA[4]+THETA[4]))*center+exp(ETA[6]+THETA[8])),2))+1*exp(-(ETA[4]+THETA[4]))*center/((1+exp(-(ETA[5]+THETA[7])))*(exp(-(ETA[4]+THETA[4]))*center+exp(ETA[6]+THETA[8]))))+exp(ETA[7]+ETA[8]+THETA[10]+THETA[9])*rx__sens_center_BY_ETA_4___*(-1*exp(-(ETA[4]+THETA[4]))/((1+exp(-(ETA[5]+THETA[7])))*(exp(-(ETA[4]+THETA[4]))*center+exp(ETA[6]+THETA[8])))+1*exp(-2*(ETA[4]+THETA[4]))*center/((1+exp(-(ETA[5]+THETA[7])))*Rx_pow_di((exp(-(ETA[4]+THETA[4]))*center+exp(ETA[6]+THETA[8])),2)))\nd/dt(rx__sens_depot_BY_ETA_5___)=-exp(ETA[1]+THETA[1])*rx__sens_depot_BY_ETA_5___\nd/dt(rx__sens_gut_BY_ETA_5___)=exp(ETA[1]+THETA[1])*rx__sens_depot_BY_ETA_5___-exp(ETA[2]+THETA[2])*rx__sens_gut_BY_ETA_5___\nd/dt(rx__sens_center_BY_ETA_5___)=exp(ETA[2]+THETA[2])*rx__sens_gut_BY_ETA_5___-exp(ETA[3]+THETA[3]-(ETA[4]+THETA[4]))*rx__sens_center_BY_ETA_5___\nd/dt(rx__sens_effect_BY_ETA_5___)=-exp(ETA[7]+THETA[9])*rx__sens_effect_BY_ETA_5___+exp(ETA[7]+ETA[8]+THETA[10]+THETA[9])*rx__sens_center_BY_ETA_5___*(-1*exp(-(ETA[4]+THETA[4]))/((1+exp(-(ETA[5]+THETA[7])))*(exp(-(ETA[4]+THETA[4]))*center+exp(ETA[6]+THETA[8])))+1*exp(-2*(ETA[4]+THETA[4]))*center/((1+exp(-(ETA[5]+THETA[7])))*Rx_pow_di((exp(-(ETA[4]+THETA[4]))*center+exp(ETA[6]+THETA[8])),2)))-1*exp(ETA[7]+ETA[8]+THETA[10]+THETA[9]-(ETA[4]+THETA[4])-(ETA[5]+THETA[7]))*center/(Rx_pow_di((1+exp(-(ETA[5]+THETA[7]))),2)*(exp(-(ETA[4]+THETA[4]))*center+exp(ETA[6]+THETA[8])))\nd/dt(rx__sens_depot_BY_ETA_6___)=-exp(ETA[1]+THETA[1])*rx__sens_depot_BY_ETA_6___\nd/dt(rx__sens_gut_BY_ETA_6___)=exp(ETA[1]+THETA[1])*rx__sens_depot_BY_ETA_6___-exp(ETA[2]+THETA[2])*rx__sens_gut_BY_ETA_6___\nd/dt(rx__sens_center_BY_ETA_6___)=exp(ETA[2]+THETA[2])*rx__sens_gut_BY_ETA_6___-exp(ETA[3]+THETA[3]-(ETA[4]+THETA[4]))*rx__sens_center_BY_ETA_6___\nd/dt(rx__sens_effect_BY_ETA_6___)=-exp(ETA[7]+THETA[9])*rx__sens_effect_BY_ETA_6___+exp(ETA[7]+ETA[8]+THETA[10]+THETA[9])*rx__sens_center_BY_ETA_6___*(-1*exp(-(ETA[4]+THETA[4]))/((1+exp(-(ETA[5]+THETA[7])))*(exp(-(ETA[4]+THETA[4]))*center+exp(ETA[6]+THETA[8])))+1*exp(-2*(ETA[4]+THETA[4]))*center/((1+exp(-(ETA[5]+THETA[7])))*Rx_pow_di((exp(-(ETA[4]+THETA[4]))*center+exp(ETA[6]+THETA[8])),2)))+1*exp(ETA[6]+ETA[7]+ETA[8]+THETA[10]+THETA[8]+THETA[9]-(ETA[4]+THETA[4]))*center/((1+exp(-(ETA[5]+THETA[7])))*Rx_pow_di((exp(-(ETA[4]+THETA[4]))*center+exp(ETA[6]+THETA[8])),2))\nd/dt(rx__sens_depot_BY_ETA_7___)=-exp(ETA[1]+THETA[1])*rx__sens_depot_BY_ETA_7___\nd/dt(rx__sens_gut_BY_ETA_7___)=exp(ETA[1]+THETA[1])*rx__sens_depot_BY_ETA_7___-exp(ETA[2]+THETA[2])*rx__sens_gut_BY_ETA_7___\nd/dt(rx__sens_center_BY_ETA_7___)=exp(ETA[2]+THETA[2])*rx__sens_gut_BY_ETA_7___-exp(ETA[3]+THETA[3]-(ETA[4]+THETA[4]))*rx__sens_center_BY_ETA_7___\nd/dt(rx__sens_effect_BY_ETA_7___)=-exp(ETA[7]+THETA[9])*effect-exp(ETA[7]+THETA[9])*rx__sens_effect_BY_ETA_7___+exp(ETA[7]+ETA[8]+THETA[10]+THETA[9])*(1-1*exp(-(ETA[4]+THETA[4]))*center/((1+exp(-(ETA[5]+THETA[7])))*(exp(-(ETA[4]+THETA[4]))*center+exp(ETA[6]+THETA[8]))))+exp(ETA[7]+ETA[8]+THETA[10]+THETA[9])*rx__sens_center_BY_ETA_7___*(-1*exp(-(ETA[4]+THETA[4]))/((1+exp(-(ETA[5]+THETA[7])))*(exp(-(ETA[4]+THETA[4]))*center+exp(ETA[6]+THETA[8])))+1*exp(-2*(ETA[4]+THETA[4]))*center/((1+exp(-(ETA[5]+THETA[7])))*Rx_pow_di((exp(-(ETA[4]+THETA[4]))*center+exp(ETA[6]+THETA[8])),2)))\nd/dt(rx__sens_depot_BY_ETA_8___)=-exp(ETA[1]+THETA[1])*rx__sens_depot_BY_ETA_8___\nd/dt(rx__sens_gut_BY_ETA_8___)=exp(ETA[1]+THETA[1])*rx__sens_depot_BY_ETA_8___-exp(ETA[2]+THETA[2])*rx__sens_gut_BY_ETA_8___\nd/dt(rx__sens_center_BY_ETA_8___)=exp(ETA[2]+THETA[2])*rx__sens_gut_BY_ETA_8___-exp(ETA[3]+THETA[3]-(ETA[4]+THETA[4]))*rx__sens_center_BY_ETA_8___\nd/dt(rx__sens_effect_BY_ETA_8___)=-exp(ETA[7]+THETA[9])*rx__sens_effect_BY_ETA_8___+exp(ETA[7]+ETA[8]+THETA[10]+THETA[9])*(1-1*exp(-(ETA[4]+THETA[4]))*center/((1+exp(-(ETA[5]+THETA[7])))*(exp(-(ETA[4]+THETA[4]))*center+exp(ETA[6]+THETA[8]))))+exp(ETA[7]+ETA[8]+THETA[10]+THETA[9])*rx__sens_center_BY_ETA_8___*(-1*exp(-(ETA[4]+THETA[4]))/((1+exp(-(ETA[5]+THETA[7])))*(exp(-(ETA[4]+THETA[4]))*center+exp(ETA[6]+THETA[8])))+1*exp(-2*(ETA[4]+THETA[4]))*center/((1+exp(-(ETA[5]+THETA[7])))*Rx_pow_di((exp(-(ETA[4]+THETA[4]))*center+exp(ETA[6]+THETA[8])),2)))\nrx__sens_effect_BY_ETA_8___(0)=exp(ETA[8]+THETA[10])+0.0\nrx_yj_~162*(CMT==5)*(1-(CMT==6))+162*(CMT==6)\nrx_lambda_~1*(CMT==5)*(1-(CMT==6))+1*(CMT==6)\nrx_hi_~1*(CMT==5)*(1-(CMT==6))+1*(CMT==6)\nrx_low_~0\nrx_pred_=(effect*(CMT==6)+exp(-(ETA[4]+THETA[4]))*center*(CMT==5)*(1-(CMT==6)))*(CMT==6)+exp(-(ETA[4]+THETA[4]))*center*Rx_pow_di((CMT==5),2)*(1-(CMT==6))\nrx__sens_rx_pred__BY_ETA_1___=rx__sens_effect_BY_ETA_1___*Rx_pow_di((CMT==6),2)+(exp(-(ETA[4]+THETA[4]))*Rx_pow_di((CMT==5),2)*(1-(CMT==6))+exp(-(ETA[4]+THETA[4]))*(CMT==6)*(CMT==5)*(1-(CMT==6)))*rx__sens_center_BY_ETA_1___\nrx__sens_rx_pred__BY_ETA_2___=rx__sens_effect_BY_ETA_2___*Rx_pow_di((CMT==6),2)+(exp(-(ETA[4]+THETA[4]))*Rx_pow_di((CMT==5),2)*(1-(CMT==6))+exp(-(ETA[4]+THETA[4]))*(CMT==6)*(CMT==5)*(1-(CMT==6)))*rx__sens_center_BY_ETA_2___\nrx__sens_rx_pred__BY_ETA_3___=rx__sens_effect_BY_ETA_3___*Rx_pow_di((CMT==6),2)+(exp(-(ETA[4]+THETA[4]))*Rx_pow_di((CMT==5),2)*(1-(CMT==6))+exp(-(ETA[4]+THETA[4]))*(CMT==6)*(CMT==5)*(1-(CMT==6)))*rx__sens_center_BY_ETA_3___\nrx__sens_rx_pred__BY_ETA_4___=rx__sens_effect_BY_ETA_4___*Rx_pow_di((CMT==6),2)+(exp(-(ETA[4]+THETA[4]))*Rx_pow_di((CMT==5),2)*(1-(CMT==6))+exp(-(ETA[4]+THETA[4]))*(CMT==6)*(CMT==5)*(1-(CMT==6)))*rx__sens_center_BY_ETA_4___-exp(-(ETA[4]+THETA[4]))*center*Rx_pow_di((CMT==5),2)*(1-(CMT==6))-exp(-(ETA[4]+THETA[4]))*center*(CMT==6)*(CMT==5)*(1-(CMT==6))\nrx__sens_rx_pred__BY_ETA_5___=rx__sens_effect_BY_ETA_5___*Rx_pow_di((CMT==6),2)+(exp(-(ETA[4]+THETA[4]))*Rx_pow_di((CMT==5),2)*(1-(CMT==6))+exp(-(ETA[4]+THETA[4]))*(CMT==6)*(CMT==5)*(1-(CMT==6)))*rx__sens_center_BY_ETA_5___\nrx__sens_rx_pred__BY_ETA_6___=rx__sens_effect_BY_ETA_6___*Rx_pow_di((CMT==6),2)+(exp(-(ETA[4]+THETA[4]))*Rx_pow_di((CMT==5),2)*(1-(CMT==6))+exp(-(ETA[4]+THETA[4]))*(CMT==6)*(CMT==5)*(1-(CMT==6)))*rx__sens_center_BY_ETA_6___\nrx__sens_rx_pred__BY_ETA_7___=rx__sens_effect_BY_ETA_7___*Rx_pow_di((CMT==6),2)+(exp(-(ETA[4]+THETA[4]))*Rx_pow_di((CMT==5),2)*(1-(CMT==6))+exp(-(ETA[4]+THETA[4]))*(CMT==6)*(CMT==5)*(1-(CMT==6)))*rx__sens_center_BY_ETA_7___\nrx__sens_rx_pred__BY_ETA_8___=rx__sens_effect_BY_ETA_8___*Rx_pow_di((CMT==6),2)+(exp(-(ETA[4]+THETA[4]))*Rx_pow_di((CMT==5),2)*(1-(CMT==6))+exp(-(ETA[4]+THETA[4]))*(CMT==6)*(CMT==5)*(1-(CMT==6)))*rx__sens_center_BY_ETA_8___\nrx_r_=Rx_pow_di(THETA[11],2)*(CMT==6)+(Rx_pow_di((exp(-(ETA[4]+THETA[4]))*center*(CMT==5)),2)*Rx_pow_di(THETA[5],2)+Rx_pow_di(THETA[6],2))*(CMT==5)*(1-(CMT==6))\nrx__sens_rx_r__BY_ETA_1___=2*exp(-(ETA[4]+THETA[4]))*rx__sens_center_BY_ETA_1___*(exp(-(ETA[4]+THETA[4]))*center*(CMT==5))*Rx_pow_di((CMT==5),2)*(1-(CMT==6))*Rx_pow_di(THETA[5],2)\nrx__sens_rx_r__BY_ETA_2___=2*exp(-(ETA[4]+THETA[4]))*rx__sens_center_BY_ETA_2___*(exp(-(ETA[4]+THETA[4]))*center*(CMT==5))*Rx_pow_di((CMT==5),2)*(1-(CMT==6))*Rx_pow_di(THETA[5],2)\nrx__sens_rx_r__BY_ETA_3___=2*exp(-(ETA[4]+THETA[4]))*rx__sens_center_BY_ETA_3___*(exp(-(ETA[4]+THETA[4]))*center*(CMT==5))*Rx_pow_di((CMT==5),2)*(1-(CMT==6))*Rx_pow_di(THETA[5],2)\nrx__sens_rx_r__BY_ETA_4___=-2*exp(-(ETA[4]+THETA[4]))*center*(exp(-(ETA[4]+THETA[4]))*center*(CMT==5))*Rx_pow_di((CMT==5),2)*(1-(CMT==6))*Rx_pow_di(THETA[5],2)+2*exp(-(ETA[4]+THETA[4]))*rx__sens_center_BY_ETA_4___*(exp(-(ETA[4]+THETA[4]))*center*(CMT==5))*Rx_pow_di((CMT==5),2)*(1-(CMT==6))*Rx_pow_di(THETA[5],2)\nrx__sens_rx_r__BY_ETA_5___=2*exp(-(ETA[4]+THETA[4]))*rx__sens_center_BY_ETA_5___*(exp(-(ETA[4]+THETA[4]))*center*(CMT==5))*Rx_pow_di((CMT==5),2)*(1-(CMT==6))*Rx_pow_di(THETA[5],2)\nrx__sens_rx_r__BY_ETA_6___=2*exp(-(ETA[4]+THETA[4]))*rx__sens_center_BY_ETA_6___*(exp(-(ETA[4]+THETA[4]))*center*(CMT==5))*Rx_pow_di((CMT==5),2)*(1-(CMT==6))*Rx_pow_di(THETA[5],2)\nrx__sens_rx_r__BY_ETA_7___=2*exp(-(ETA[4]+THETA[4]))*rx__sens_center_BY_ETA_7___*(exp(-(ETA[4]+THETA[4]))*center*(CMT==5))*Rx_pow_di((CMT==5),2)*(1-(CMT==6))*Rx_pow_di(THETA[5],2)\nrx__sens_rx_r__BY_ETA_8___=2*exp(-(ETA[4]+THETA[4]))*rx__sens_center_BY_ETA_8___*(exp(-(ETA[4]+THETA[4]))*center*(CMT==5))*Rx_pow_di((CMT==5),2)*(1-(CMT==6))*Rx_pow_di(THETA[5],2)\n"

    expect_error(rxSumProdModel(f), NA)


  })
}
